import{E as t,i as e,a as i,b as o,c as n}from"../chunk/vendor-editor-L7A9Ap2O.js";class s{constructor(t,e={}){this.element=t,this.options={placeholder:e.placeholder||"Type your message...",minHeight:e.minHeight||"200px",editable:!1!==e.editable,onUpdate:e.onUpdate||(()=>{}),onBlur:e.onBlur||(()=>{}),onFocus:e.onFocus||(()=>{}),...e},this.editor=null,this.init()}init(){const s=document.createElement("div");s.className="rich-text-editor";const r=this.createToolbar();s.appendChild(r);const c=document.createElement("div");c.className="editor-content",c.style.minHeight=this.options.minHeight,s.appendChild(c),this.element.style.display="none",this.element.parentNode.insertBefore(s,this.element.nextSibling),this.editor=new t({element:c,extensions:[e.configure({heading:{levels:[1,2,3]}}),i.configure({placeholder:this.options.placeholder}),o.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 hover:underline"}}),n.configure({inline:!0,allowBase64:!0})],content:this.element.value,editable:this.options.editable,onUpdate:({editor:t})=>{this.element.value=t.getHTML(),this.options.onUpdate(t.getHTML())},onBlur:({editor:t})=>{this.options.onBlur(t)},onFocus:({editor:t})=>{this.options.onFocus(t)}})}createToolbar(){const t=document.createElement("div");t.className="editor-toolbar flex items-center gap-1 p-2 bg-gray-50 border border-gray-300 rounded-t";return[{icon:"B",title:"Bold",action:()=>this.editor.chain().focus().toggleBold().run(),isActive:()=>this.editor.isActive("bold")},{icon:"I",title:"Italic",action:()=>this.editor.chain().focus().toggleItalic().run(),isActive:()=>this.editor.isActive("italic")},{icon:"U",title:"Underline",action:()=>this.editor.chain().focus().toggleUnderline().run(),isActive:()=>this.editor.isActive("underline")},{type:"separator"},{icon:"â—",title:"Bullet List",action:()=>this.editor.chain().focus().toggleBulletList().run(),isActive:()=>this.editor.isActive("bulletList")},{icon:"1.",title:"Numbered List",action:()=>this.editor.chain().focus().toggleOrderedList().run(),isActive:()=>this.editor.isActive("orderedList")},{type:"separator"},{icon:"ðŸ”—",title:"Insert Link",action:()=>this.insertLink()},{icon:"ðŸ–¼",title:"Insert Image",action:()=>this.insertImage()},{icon:"ðŸ“Ž",title:"Attach File",action:()=>{var t,e;return null==(e=(t=this.options).onAttachment)?void 0:e.call(t)}},{type:"separator"},{icon:"âœ“",title:"Save Draft",action:()=>{var t,e;return null==(e=(t=this.options).onSaveDraft)?void 0:e.call(t)},className:"text-green-600"},{icon:"ðŸ—‘",title:"Discard",action:()=>{var t,e;return null==(e=(t=this.options).onDiscard)?void 0:e.call(t)},className:"text-red-600"}].forEach(e=>{if("separator"===e.type){const e=document.createElement("div");e.className="w-px h-6 bg-gray-300 mx-1",t.appendChild(e)}else{const i=document.createElement("button");i.type="button",i.className=`editor-btn px-3 py-1 rounded hover:bg-gray-200 ${e.className||""}`,i.innerHTML=e.icon,i.title=e.title,i.addEventListener("click",t=>{t.preventDefault(),e.action(),e.isActive&&i.classList.toggle("active",e.isActive())}),t.appendChild(i)}}),t}insertLink(){const t=prompt("Enter URL:");t&&this.editor.chain().focus().setLink({href:t}).run()}insertImage(){const t=prompt("Enter image URL:");t&&this.editor.chain().focus().setImage({src:t}).run()}getHTML(){return this.editor.getHTML()}setContent(t){this.editor.commands.setContent(t)}destroy(){this.editor&&this.editor.destroy()}focus(){this.editor.commands.focus()}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".rich-text-editor-init").forEach(t=>{new s(t)})});export{s as RichTextEditor,s as default};
